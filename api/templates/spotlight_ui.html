<script>
document.getElementById("spotlightForm").onsubmit = async function(e) {
    e.preventDefault();

    const ticker = e.target.ticker.value;
    const horizon = e.target.horizon.value;

    const res = await fetch("/api/spotlight", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ ticker, horizon })
    });

    const json = await res.json();

    if (json.html) {
        window.location.href = json.html;
    } else {
        alert("Error: " + json.error);
    }
};
</script>
