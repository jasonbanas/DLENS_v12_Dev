<!DOCTYPE html>
<html>
<head>
    <title>DLENS Spotlight v12</title>
    <style>
        body { background: #f7f7f7; font-family: Arial; }
        .box {
            background:white; width:480px; margin:60px auto;
            padding:30px; border-radius:16px;
            box-shadow:0 4px 12px rgba(0,0,0,0.1);
            text-align:center;
        }
        input, select {
            width:100%; padding:12px; margin-top:12px;
            border-radius:8px; border:1px solid #ccc;
        }
        button {
            width:100%; padding:14px; margin-top:20px;
            background:#0094ff; color:white; border:none;
            border-radius:8px; cursor:pointer; font-size:16px;
        }
    </style>
</head>

<body>
    <div class="box">
        <h2>DLENS Spotlight v12</h2>

        <input id="ticker" placeholder="Ticker (e.g. AAPL)" />

        <select id="horizon">
            <option value="1">1-Year Horizon</option>
            <option value="5">5-Year Horizon</option>
            <option value="10">10-Year Horizon</option>
        </select>

        <button id="generateButton">Generate Spotlight</button>

        <p id="status" style="margin-top:20px;color:#555;"></p>
    </div>

<script>
document.getElementById("generateButton").onclick = async () => {
    const ticker = document.getElementById("ticker").value.trim();
    const horizon = document.getElementById("horizon").value;

    if (!ticker) {
        alert("Enter a ticker symbol");
        return;
    }

    document.getElementById("status").innerText = "Generating report...";

    const response = await fetch("/api/spotlight", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            ticker: ticker,
            horizon: horizon
        })
    });

    const result = await response.json();

    if (result.url) {
        window.location.href = result.url;
    } else {
        document.getElementById("status").innerText = "Error: " + result.error;
    }
};
</script>
</body>
</html>
